<!DOCTYPE html>
<html>
<head>
    <title>Survey WiFi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; max-width: 600px; margin: auto; }
        input, select, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        
        /* Gaya untuk Peta */
        #map-canvas { height: 300px; width: 100%; border-radius: 5px; margin: 10px 0; border: 1px solid #ddd; }
        
        button { width: 100%; padding: 15px; background-color: #25D366; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        button:hover { background-color: #128C7E; }
        .hint { font-size: 0.8em; color: #666; margin-top: -5px; }
    </style>
</head>
<body>
    <h2>Calon Pelanggan WiFi</h2>
    
    <input type="text" id="nama" placeholder="Nama Pelanggan">
    <textarea id="alamat" placeholder="Alamat Lengkap"></textarea>
    
    <label>Pilih Lokasi di Peta:</label>
    <div id="map-canvas"></div>
    <p class="hint">*Klik pada peta untuk menandai lokasi rumah</p>
    
    <input type="text" id="map-link" placeholder="Link Google Maps (Otomatis)" readonly>
    
    <input type="text" id="wifi" placeholder="Nama WiFi (SSID)">
    <input type="text" id="sandi" placeholder="Sandi WiFi">
    
    <select id="paket">
        <option value="">-- Pilih Paket --</option>
        <option value="Lite 130k">Lite 130k</option>
        <option value="Basic 175k">Basic 175k</option>
        <option value="Pro 220k">Pro 220k</option>
        <option value="Combo TV 250k">Combo TV 250k</option>
        <option value="Gamers 315k">Gamers 315k</option>
        <option value="Fun 510k">Fun 510k</option>
    </select>
    
    <button onclick="kirimWA()">KIRIM KE WHATSAPP</button>

    <script async src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>

    <script>
        let map;
        let marker;

        function initMap() {
            // Koordinat default (Pusat Indonesia atau lokasi kantor Anda)
            const defaultLoc = { lat: -6.2000, lng: 106.8166 };
            
            map = new google.maps.Map(document.getElementById("map-canvas"), {
                zoom: 13,
                center: defaultLoc,
            });

            // Klik peta untuk ambil koordinat
            map.addListener("click", (event) => {
                addMarker(event.latLng);
            });
        }

        function addMarker(location) {
            // Hapus marker lama jika ada
            if (marker) marker.setMap(null);

            marker = new google.maps.Marker({
                position: location,
                map: map,
                animation: google.maps.Animation.DROP
            });

            // Buat URL Google Maps
            const lat = location.lat();
            const lng = location.lng();
            const url = `https://www.google.com/maps?q=${lat},${lng}`;
            
            // Masukkan ke input teks
            document.getElementById("map-link").value = url;
        }

        function kirimWA() {
            const nama = document.getElementById('nama').value;
            const alamat = document.getElementById('alamat').value;
            const mapLink = document.getElementById('map-link').value;
            const wifi = document.getElementById('wifi').value;
            const sandi = document.getElementById('sandi').value;
            const paket = document.getElementById('paket').value;

            if(!mapLink) {
                alert("Silakan pilih lokasi di peta terlebih dahulu!");
                return;
            }

            const text = `*DATA PEMASANGAN WIFI*%0A%0A` +
                         `*Nama:* ${nama}%0A` +
                         `*Alamat:* ${alamat}%0A` +
                         `*Maps:* ${mapLink}%0A` +
                         `*Paket:* ${paket}%0A` +
                         `*Nama WiFi:* ${wifi}%0A` +
                         `*Sandi WiFi:* ${sandi}%0A` ;

            // Ganti nomor di bawah dengan nomor WhatsApp tujuan (gunakan kode negara 62)
            const nomorWA = "628123456789";
window.location.href = `https://api.whatsapp.com/send?text=${text}`;
}
    </script>
</body>
</html>
